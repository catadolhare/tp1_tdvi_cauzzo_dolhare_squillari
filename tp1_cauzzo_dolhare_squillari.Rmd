---
title: "TP1"
author: "Catalina Dolhare, Camila Cauzzo, Renata Squillari"
date: "`r Sys.Date()`"
output:
  word_document: default
  pdf_document: default
---
*1. Introducción al problema*
El siguiente conjunto de datos presenta información acerca de una encuesta de satisfacción a pasageros de una cierta aerolinea. Obtuvimos este dataset de Kaggle, el cual cuenta con un conjunto de train con 104000 datos, representando el 80% del data set, y un conjunto de test con 26000 datos, representando el 20% del data set. Este data set cuenta con 23 variables, como "Type of travel", "Class", "Flight distance", "Departure Delay in Minutes", "Arrival Delay in Minutes". Principalmente, cuenta con "Satisfaction", variable categorica que puede tomar dos opciones: "Satisfaction" o "neutral or dissatisfaction".Con toda esta información, intentaremos predecir la satisfacción de un pasajero dado las respuesta a las variables.


- Justificar la elección del conjunto de datos para el uso de árboles de decisión.

*2. Preparación de los datos*
```{r}
datos_train <- read.csv("train.csv")
datos_test <- read.csv("test.csv")
```

```{r}
datos<-rbind(datos_train, datos_test)
datos
```
```{r}
set.seed(123)
sample_datos <- datos[sample(nrow(datos), 50000),]
nrow(sample_datos)
```
```{r}
sample_datos$satisfaction <- as.numeric(as.factor(sample_datos$satisfaction)) - 1
```

```{r}
summary(sample_datos)
```
```{r}
plot(sample_datos$Departure.Delay.in.Minutes, sample_datos$Arrival.Delay.in.Minutes, main = "Departure Delay vs. Arrival Delay", xlab = "Departure delay en minutos", ylab = "Arrival delay en minutos")
```
*3. Construcción de un árbol de decisión básico*
```{r}
entrenamiento <- sample_datos[1:35000,]
validacion <- sample_datos[35001:42500,]
testeo <- sample_datos[42501:50000,]

nrow(entrenamiento)
nrow(validacion)
nrow(testeo)
```
```{r}
library(rpart)
```
```{r}
tree <- rpart(formula = satisfaction ~ ., 
              data = entrenamiento, 
              method = "class")
tree$control
```
```{r}
library(rpart.plot)
rpart.plot(tree)
```
*4. Evaluación del árbol de decisión básico*
```{r}
predictions <- predict(tree, newdata = testeo, type = "class")
predictions
```
```{r}
install.packages("stats")
install.packages("utils")
install.packages("ROCR")
library(stats)
library(utils)
library(ROCR)
ConfusionMatrix(predictions, testeo$satisfaction)
```